<!DOCTYPE html>
<html>
  <head>
    <title>SOLUSDT Live Chart</title>
    <style>
      body {
        margin: 0;
      }

      .responsive-widget-container {
        width: 100%;
        height: calc(100vh - 30px); /* Initial assumption of ticker height */
        max-width: 100%;
      }

      .tradingview-widget-container,
      .tradingview-widget-container__widget {
        width: 100% !important;
        height: 100% !important;
      }

      @media (max-width: 600px) {
        .responsive-widget-container {
          height: calc(100vh - 30px); /* Adjust for smaller screens */
        }
      }

      #crypto-ticker-bar {
        position: fixed;
        bottom: 0;
        left: 0;
        width: 100%;
        background: black;
        color: #00FFAA;
        font-family: sans-serif;
        font-size: 18px;
        overflow: hidden;
        z-index: 9999;
      }
    </style>
  </head>

  <body>
    <!-- TradingView Widget -->
    <div class="responsive-widget-container">
      <div class="tradingview-widget-container">
        <div class="tradingview-widget-container__widget"></div>
        <div class="tradingview-widget-copyright">
          <a href="https://www.tradingview.com/" rel="noopener nofollow" target="_blank">
            <span class="blue-text">Track all markets on TradingView</span>
          </a>
        </div>
        <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js" async>
        {
          "autosize": true,
          "symbol": "BINANCE:SOLUSDT",
          "interval": "60",
          "timezone": "America/Chicago",
          "theme": "dark",
          "style": "9",
          "locale": "en",
          "allow_symbol_change": true,
          "studies": [
            "STD;Smoothed%1Moving%1Average",
            "STD;Stochastic_RSI"
          ],
          "support_host": "https://www.tradingview.com"
        }
        </script>
      </div>
    </div>
    <!-- TradingView Widget End -->

    <!-- Crypto Ticker Bar -->
    <div id="crypto-ticker-bar">
      <marquee behavior="scroll" direction="left" scrollamount="3" id="ticker">
        Loading crypto news...
      </marquee>
    </div>

    <!-- Crypto Ticker Script -->
    <script>
      fetch('https://cors-anywhere.herokuapp.com/' + encodeURIComponent('https://cryptopanic.com/news/rss/'))
  .then(response => response.json())
  .then(data => {
    const parser = new DOMParser();
    const xml = parser.parseFromString(data.contents, "text/xml");
    const items = xml.querySelectorAll("item");

    // Log the items to see if they exist
    console.log(items);

    const headlines = Array.from(items).map(item => item.querySelector("title").textContent);
    document.getElementById("ticker").textContent = headlines.join(" âœ¦ ");
  })
  .catch(error => console.error("Error fetching crypto news:", error));
    </script>

    <!-- Dynamic Height Adjustment Script -->
    <script>
      window.addEventListener('load', () => {
        const tickerHeight = document.getElementById('crypto-ticker-bar').offsetHeight;
        const chartContainer = document.querySelector('.responsive-widget-container');
        chartContainer.style.height = `calc(100vh - ${tickerHeight}px)`;
      });
    </script>
  </body>
</html>
